<!DOCTYPE html>
<html lang="en">
 <head>
  <title>Github Test Site</title>
</head>
<body>
 <div>
  <section>
   <heading> 
    <h1>Ryan J Shih</h1>
    <h3><pre><code>import smbus2
import RPi.GPIO as GPIO
import time

# I2C setup for PCF8591
address = 0x48
bus = smbus2.SMBus(1)

# GPIO setup for digital pin
DIGITAL_PIN = 17
GPIO.setmode(GPIO.BCM)
GPIO.setup(DIGITAL_PIN, GPIO.IN)

def read_analog(channel):
    # 0x40 enables ADC; channel 0 corresponds to AIN0
    bus.write_byte(address, 0x40 + channel)
    bus.read_byte(address) # Dummy read
    return bus.read_byte(address)

try:
    print("Reading Hall Sensor (Ctrl+C to stop)...")
    while True:
        # 1. Read Analog Value (0-255)
        analog_val = read_analog(0)
        
        # 2. Read Digital State (0 or 1)
        # Note: Most Hall modules are 'Active Low' (0 when magnet is near)
        digital_state = GPIO.input(DIGITAL_PIN)
        
        status = "MAGNET DETECTED" if digital_state == 0 else "No Magnet"
        
        print(f"Analog: {analog_val:3d} | Digital: {digital_state} ({status})")
        
        time.sleep(0.2)

except KeyboardInterrupt:
    GPIO.cleanup()
    print("\nProgram stopped.")

    </code></pre></h3>
   </heading>
  </section>
 </body>
</html>
